<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /**
         * Definition for singly-linked list.
         * function ListNode(val, next) {
         *     this.val = (val===undefined ? 0 : val)
         *     this.next = (next===undefined ? null : next)
         * }
         */

        /**
         * @param {ListNode} head
         * @param {number} left
         * @param {number} right
         * @return {ListNode}
         */
        var reverseBetween = function (head, left, right) {
            if(!head) return head

            //初始化一个虚拟节点
            let virtualNode = new ListNode()
            virtualNode.next = head

            let prev = virtualNode
            for(let i = 0;i<left -1 ;i++){ //left 前一个节点
                prev = prev.next
            }

            let rightNode = prev
            for(let i = 0;i<right - left + 1;i++){
                rightNode = rightNode.next
            }

            //保留节点
            let leftNode = prev.next
            let currentNode = rightNode.next

            //截断节点
            prev.next = null
            rightNode.next = null;

            reverse(leftNode);

            prev.next = rightNode
            leftNode.next = currentNode

            return virtualNode.next
        };

        function reverse(head){
            
            //定义 2 个指针
            let prev = null;
            let current = head;

            while(current !== null){
                let next = current.next;
                current.next = prev;
                prev = current
                current = next;
            }
        }
    </script>
</body>

</html>